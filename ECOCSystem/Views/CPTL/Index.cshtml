@using ECOCSystem.Model
@model CPTLModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .address-setting {
        font-size:15px;
    }

    .add-button {
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 30px;
        display: flex;
        align-content: center;
        justify-content: center;
        align-items: center;
    }

    .addnew-button {
        display: flex;
        align-items: flex-end;
    }


    .cptl-title-header {
        display: flex;
        align-items: center;
    }

        .cptl-title-header label {
            margin: 0;
   
        }

        .cptl-title-header .tooltip {
            white-space: nowrap;
        }
    /*addnew button*/
    .uiverse {
        position: relative;
        background: #ffffff;
        color: #000;
        /* padding: 15px; */
        margin: 10px;
        /* border-radius: 10px; */
        width: 32px;
        height: 33px;
        font-size: 17px;
        display: flex;
        justify-content: center;
        align-items: center;
        /* flex-direction: column; */
        box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        border-radius: 50%;
        transition: all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        background-color: green;
        color: white;
        font-size: 17px;
        font-weight: lighter;
    }

    

.tooltip {
  position: absolute;
  top: 0;
  font-size: 14px;
  background: #ffffff;
  color: #ffffff;
  padding: 5px 8px;
  border-radius: 5px;
  box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.tooltip::before {
  position: absolute;
  content: "";
  height: 8px;
  width: 8px;
  background: #ffffff;
  bottom: -3px;
  left: 50%;
  transform: translate(-50%) rotate(45deg);
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.uiverse:hover .tooltip {
  top: -45px;
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

svg:hover span,
svg:hover .tooltip {
  text-shadow: 0px -1px 0px rgba(0, 0, 0, 0.1);
}

.uiverse:hover,
.uiverse:hover .tooltip,
.uiverse:hover .tooltip::before {
 /* background: linear-gradient(320deg, rgb(3, 77, 146), rgb(0, 60, 255));*/
  color: #ffffff;
  background-color:green;
}
    /*addnew button*/



    .toggle-group {
        font-family: 'Source Sans Pro';
        color: #117a8b;
    }


    .btn-edit-1 {
        background-color: white;
        color: green;
        border-radius: 10px;
        box-shadow: 0px 0px 0px 0px gray !important;
    }


    .btn-edit-1 span i {
        font-size:23px;
    }



   
</style>
<section class="content">
    <div class="card">


        <div class="card-header">
            <h3 class="card-title"><h4>CPTL Application</h4></h3>
        </div>
        <div class="card-body">
            <div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap4">
                <div class="row">
                    <div class="col-sm-12">
                        @using (Html.BeginForm("CPTL", "CPTL", null, FormMethod.Post, new { enctype = "multipart/form-data", id = "CPTL_Form" }))
                        {
                            @Html.HiddenFor(o => o.CPTLID, new { Value = "CPTLID" })
                            <section class="row mt-4 pb-4 justify-content-center">
                                <div class="form-group col-lg-4">
                                    @Html.LabelFor(o => o.isRenewal)
                                    <div class="input-group">
                                        @Html.CheckBoxFor(o => o.isRenewal, new
                                   {
                                       @class = "form-control",
                                       placeholder = ""
                                   })
                                    </div>
                                    @Html.ValidationMessageFor(m => m.isRenewal)
                                </div>
                            </section>
                            <section class="row pb-4">
                                <div class="col-12 col-sm-12 card">
                                    @*<h6 class="card-title card-header"><b>Client Address list</b></h6>*@
                                    <div class="cptl-title-header card-header " style="display: flex; align-items: center;">
                                        <label>Select Client</label>
                                        <div class="uiverse ">
                                            <span class="tooltip">Add new client</span>
                                            <span type="button" data-toggle="modal" data-target="#modal-client">
                                                @*<i class="fa fa-plus btn-sm"></i>*@
                                                +
                                            </span>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                            <div class="row">
                                                <div class="col-sm-12" style="display:flex;align-items:center;">
                                                    <select class="form-control select2 select2-danger select2-hidden-accessible" data-dropdown-css-class="select2-danger" style="width: 100%;" data-select2-id="12" tabindex="-1" aria-hidden="true">
                                                        <option selected="selected" data-select2-id="14">Databridge Asia inc - Corporate</option>
                                                        <option data-select2-id="56">Lorem D. Janeth - Individual</option>
                                                        <option data-select2-id="57">Mark C. Eddie - Individual</option>
                                                        <option data-select2-id="58">Denmark Lee - Individual</option>
                                                        <option data-select2-id="59">Nickie - Individual</option>
                                                        <option data-select2-id="60">Motor Inc - Corporate</option>
                                                        <option data-select2-id="61">Moa Inc - Corporate</option>
                                                    </select>
                                                    <div class="col-sm-1 uiverse btn-edit-1">
                                                        <span class="tooltip" style="white-space:nowrap;">Edit client</span>
                                                        <span type="button" data-toggle="modal" data-target="#modal-client">
                                                            <i class="fa fa-user-edit btn-sm"></i>

                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </section>
                            <!--<section class="row pb-4 mt-4">
        <div class="col-12 col-sm-8" data-select2-id="55">
            <div class="form-group" data-select2-id="54">
                <div class="cptl-title-header" style="display: flex; align-items: center;">
                    <label>Select Client</label>
                    <div class="uiverse ">
                        <span class="tooltip">Add new client</span>
                        <span type="button" data-toggle="modal" data-target="#modal-client">
                            +
                        </span>
                    </div>
                </div>

                <select class="form-control select2 select2-danger select2-hidden-accessible" data-dropdown-css-class="select2-danger" style="width: 100%;" data-select2-id="12" tabindex="-1" aria-hidden="true">
                    <option selected="selected" data-select2-id="14">Databridge Asia inc - Corporate</option>
                    <option data-select2-id="56">Lorem D. Janeth - Individual</option>
                    <option data-select2-id="57">Mark C. Eddie - Individual</option>
                    <option data-select2-id="58">Denmark Lee - Individual</option>
                    <option data-select2-id="59">Nickie - Individual</option>
                    <option data-select2-id="60">Motor Inc - Corporate</option>
                    <option data-select2-id="61">Moa Inc - Corporate</option>
                </select>-->

                            <!--</div>

            </div>


        </section>-->
                            <section class="row pb-4">
                                <div class="col-12 col-sm-12 card">
                                    @*<h6 class="card-title card-header"><b>Client Address list</b></h6>*@
                                    <div class="cptl-title-header card-header " style="display: flex; align-items: center;">
                                        <label>Address List</label>
                                        <div class="uiverse ">
                                            <span class="tooltip">Add new address</span>
                                            <span>
                                                @*<i class="fa fa-edit btn-sm"></i>*@
                                                +
                                            </span>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <table id="example2" class="table table-head-fixed table-hover dataTable dtr-inline " style="cursor:pointer" aria-describedby="example2_info" t>
                                                        <thead>
                                                            <tr>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Select</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Street Name</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Barangay</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">City</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Address Type</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @*<tr class="odd">
                                                <td class="sorting_1 dtr-control">Gecko</td>
                                                <td>Mozilla 1.5</td>
                                                <td class="">Win 95+ / OSX.1+</td>
                                                <td>1.5</td>
                                                <td>A</td>
                                            </tr>*@
                                                            @*@foreach (var item in Model)
                                            {
                                                <tr>
                                                    <td style="max-width:12%" id="User_LName">@item.FirstName</td>
                                                    <td style="max-width:12%" id="User_LName">@item.LastName</td>
                                                    <td style="max-width:12%" id="User_LName">@item.Email</td>
                                                    <td style="max-width:12%" id="User_LName">@item.UserType</td>
                                                </tr>
                                            }*@

                                                        </tbody>
                                                        @*<tfoot>
                                            <tr>
                                                <th rowspan="1" colspan="1">First name</th>
                                                <th rowspan="1" colspan="1">Last name</th>
                                                <th rowspan="1" colspan="1">Email</th>
                                            </tr>
                                        </tfoot>*@
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section class="row pb-4">
                                <div class="col-12 col-sm-12 card">
                                    <div class="cptl-title-header card-header " style="display: flex; align-items: center;">
                                        <label>Vehicle List</label>
                                        <div class="uiverse ">
                                            <span class="tooltip">Add new vehicle</span>
                                            <span>
                                                +
                                            </span>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div id="example2_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <table id="example2" class="table table-head-fixed table-hover dataTable dtr-inline " style="cursor:pointer" aria-describedby="example2_info" t>
                                                        <thead>
                                                            @*<tr>
                                            <th class="sorting sorting_desc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Rendering engine: activate to sort column ascending" aria-sort="descending">Rendering engine</th>
                                            <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Browser</th>
                                            <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Platform(s): activate to sort column ascending">Platform(s)</th>
                                            <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Engine version: activate to sort column ascending">Engine version</th>
                                            <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="CSS grade: activate to sort column ascending">CSS grade</th>
                                            </tr>*@
                                                            <tr>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Engine</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Chassis</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Make</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Body</th>
                                                                <th class="sorting" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-label="Browser: activate to sort column ascending">Vehicle Type</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @*<tr class="odd">
                                                <td class="sorting_1 dtr-control">Gecko</td>
                                                <td>Mozilla 1.5</td>
                                                <td class="">Win 95+ / OSX.1+</td>
                                                <td>1.5</td>
                                                <td>A</td>
                                            </tr>*@
                                                            @*@foreach (var item in Model)
                                            {
                                                <tr>
                                                    <td style="max-width:12%" id="User_LName">@item.FirstName</td>
                                                    <td style="max-width:12%" id="User_LName">@item.LastName</td>
                                                    <td style="max-width:12%" id="User_LName">@item.Email</td>
                                                    <td style="max-width:12%" id="User_LName">@item.UserType</td>
                                                </tr>
                                            }*@

                                                        </tbody>
                                                        @*<tfoot>
                                            <tr>
                                                <th rowspan="1" colspan="1">First name</th>
                                                <th rowspan="1" colspan="1">Last name</th>
                                                <th rowspan="1" colspan="1">Email</th>
                                            </tr>
                                        </tfoot>*@
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section class="row mt-4 pb-4 submit-btn">
                                <button class="btn btn-info" style="height: 45px; ">Submit Application</button>
                            </section>

                            <div class="modal fade" id="modal-client" style="display: none;" aria-hidden="true">
                                <div class="modal-dialog modal-xl">

                                    @{
                                        Html.RenderPartial("_Client", Model.Client, new ViewDataDictionary() { TemplateInfo = new TemplateInfo() { HtmlFieldPrefix = "Client" } });
                                    }
                                </div>

                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
  
   
</section>

<script>

     function submitForm(submitType) {
        var form = jQuery("#CPTL_Form");
        if (form.valid()) {
            var formData = new FormData(form[0]);
            formData.append("submitType", submitType);
            $.ajax({
                url: '@Url.Action("CPTL", "CPTL")',
                type: "POST",
                dataType: "JSON",
                contentType: false,
                processData: false,
                async: true,
                data: addAntiForgeryToken(formData),
                beforeSend: function () {
                    toastr.clear();
                    $('#loadingScreen').show();
                },
                success: function (response) {
                    switch (response.Status) {
                        case "Success":
                            //$("#" + submitType).html(response.Data);
                            //$("#" + submitType + "_nav").removeClass("error warning").addClass("done");

                            //if (response.MVID > 0) {
                            //    history.pushState("", "MV Information", "?id=" + response.MVID);
                            //    $("#MVID").val(response.MVID);
                            //}

               /*             changeStatus();*/
            /*                LoadImage(response.MVID);*/
                            toastr.success(response.Message);
                            break;
                        case "Warning":
                            toastr.warning(response.Message);
                            break;
                        case "Info":
                            toastr.info(response.Message);
                            break;
                        default:
                            toastr.error(response.Message);
                            break;
                    }
                },
                error: function (xhr, status, error) {
                    toastr.error('An error has occured while processing, Please contact Databridge Support.');
                },
                complete: function () {
                    $(".modal").modal('hide');
                    $('.modal-backdrop').remove();
                    $('#loadingScreen').hide();
                },
            });
        }
/*        $(".tab-content").height("auto");*/
    }
    $(document).ready(function () {
        $("#btm_csr_btn_container").html('' +
            '<button type="button" id="verify_csr" class="btn btn-block btn-success" style="width: 250px;"> Submit </button>');

        $('#isRenewal').bootstrapToggle({
            toggle: "toggle",
            on: "Renewal",
            off: "New Registration",
            onstyle: "success",
            offstyle: "success",
            width: "100%",
            height: "100%",
        });

        toastr.success("Submitted Success");

 /*       HPGType($("#MVCC_IsSBR").is(":checked"));*/

        $("#isRenewal").on("change", function () {
           /* HPGType($(this).is(":checked"));*/
        });
    });


</script>
